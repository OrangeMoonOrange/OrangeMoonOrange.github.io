---
layout:     post
title:      UML基础系列：类图
subtitle:   看懂UML类图
date:       2019-09-10
author:     XK
header-img: img/tag-bg-o.jpg
catalog: true
tags:
    - UML
---

# 看懂UML类图

这里不会将UML的各种元素都提到，我只想讲讲类图中各个类之间的关系； 能看懂类图中各个类之间的线条、箭头代表什么意思后，也就足够应对 日常的工作和交流； 同时，我们应该能将类图所表达的含义和最终的代码对应起来； 有了这些知识，看后面章节的设计模式结构图就没有什么问题了。



## 类的属性表示方法

在UML类图中，类使用包含类名、属性(field) 和方法(method) 且带有分割线的矩形来表示，比如下图表示一个Employee类，它包含name,age这2个属性，以及setAge()和getAge()两个方法。

![image-20200921151955426](https://kaikaimd.oss-cn-beijing.aliyuncs.com/md/image-20200921151955426.png)



那么属性/方法名称前加的加号和减号是什么意思呢？它们表示了这个属性或方法的可见性，UML类图中表示可见性的符号有三种：

**·** + ：表示public

**·** - ：表示private

**·** #：表示protected

因此，上图中的Employee类具有2个私有属性和2个公有方法

实际上，属性的完整表示方式是这样的：

**可见性** **名称** **：类型** **[ =** **缺省值**]

其中括号中的内容表示是可选的

## 类的方法表示方式

上图中我们已经看到了方法的表示形式。实际上，方法的完整表示方式如下：

**可见性** **名称**(**参数列表** **参数1:类型**..) [ **：** **返回类型**]

同样，中括号中的内容是可选的。

- Employee类中公有方法setAge()接受为int类型的参数age，无返回类型
- Employee类中公有方法getAge()没有参数，返回类型为int

## 类与类之间的关系表示方式

下图来自【2】

<img src="https://kaikaimd.oss-cn-beijing.aliyuncs.com/md/16c098ab66f35678" alt="UML类与类之间关系.png" style="zoom: 33%;" />

### 关联关系

他体现的是两个类、或者类与接口之间语义级别的一种强依赖关系，比如我和我的朋友；这种关系比依赖更强、不存在依赖关系的偶然性、关系也不是临时性的，一般是长期性的，而且双方的关系一般是平等的、关联可以是单向(Directed Association)、双向的(Association)；表现在代码层面，为被关联类B以类属性的形式出现在关联类A中，也可能是关联类A引用了一个类型为被关联类B的全局变量；

### 聚合关系(Aggregation)

聚合是关联关系的一种特例，他体现的是整体与部分、拥有的关系，即has-a的关系，此时整体与部分之间是可分离的，他们可以具有各自的生命周期，部分可以属于多个整体对象，也可以为多个整体对象共享；比如计算机与CPU、公司与员工的关系等；表现在代码层面，和关联关系是一致的，只能从语义级别来区分；

### 组合关系(Composition)

组合也是关联关系的一种特例，他体现的是一种contains-a的关系，这种关系比聚合更强，也称为强聚合；他同样体现整体与部分间的关系，但此时整体与部分是不可分的，整体的生命周期结束也就意味着部分的生命周期结束；比如你和你的大脑；表现在代码层面，和关联关系是一致的，只能从语义级别来区分；

### 依赖关系(Dependency)

可以简单的理解，就是一个类A使用到了另一个类B，而这种使用关系是具有偶然性的、临时性的、非常弱的，但是B类的变化会影响到A；比如某人要过河，需要借用一条船，此时人与船之间的关系就是依赖；表现在代码层面，为类B作为参数被类A在某个method方法中使用；

### 继承关系(generalization/extends)

继承关系对应的是extend关键字

### 实现关系（Interface Realization）

指的是一个class类实现interface接口（可以是多个）的功能；实现是类与接口之间最常见的关系



傻傻分不清楚这几种关系：

**组合>聚合>关联>依赖；**



程老师的《大话》里举大那个大雁的例子很贴切 在此我就借用一下 大雁喜欢热闹害怕孤独 所以它们一直过着群居的生活 这样就有了雁群 每一只大雁都有自己的雁群 每个雁群都有好多大雁 大雁与雁群的这种关系就可以称之为聚合 另外每只大雁都有两只翅膀 大雁与雁翅的关系就叫做组合 有此可见 聚合的关系明显没有组合紧密 大雁不会因为它们的群主将雁群解散而无法生存 而雁翅就无法脱离大雁而单独生存——组合关系的类具有相同的生命周期







## 从一个示例开始





# 参考文章

1.[五分钟读懂UML](https://www.cnblogs.com/shindo/p/5579191.html)

2.[UML类图详解](https://juejin.im/post/6844903893327937550)

3.[UML类图关系（泛化 、继承、实现、依赖、关联、聚合、组合）](https://www.cnblogs.com/olvo/archive/2012/05/03/2481014.html)